<!DOCTYPE html>
<html
lang="en" 
th:fragment="parent(content, title, script)" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-th-replace="${title}">NexusFlow</title>
    <link rel="icon" type="image/png" th:href="@{'/images/favicon_logo.png'}" />
    <link href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css" rel="stylesheet" />
    <link rel="stylesheet" th:href="@{'/css/output.css'}">
    <link rel="stylesheet" th:href="@{'/css/style.css'}">
    
</head>
<body class="dark:bg-gray-900 dark:text-white bg-gray-100" >
 


<!-- agar user login hai to ye user-navbar show hoga -->
    <div th:if="${loggedInUser}">
        <div th:replace="~{user/user_navbar :: user-navbar}"></div>
    </div>

    

    <!-- aur agar user login nahi hai to navbar show hoga -->
<div th:unless="${loggedInUser}">
     <div th:replace="~{navbar :: navbar}"></div>
</div>
     <!-- "${#strings.equals(#httpServletRequest.requestURI, '/user/profile') ? 'pt-28' : 'pt-20'}" -->
       
    <!-- main content here -->
     <div >
        <section data-th-replace="${content}"></section>
     </div>

     <!-- Footer  -->
     <div th:replace="~{footer :: footer}"></div>

 <script>
  const userMenuBtn = document.getElementById("user-menu-btn");
  const userDropdown = document.getElementById("user-dropdown");

  if (userMenuBtn && userDropdown) {
    userMenuBtn.addEventListener("click", function(e) {
      e.stopPropagation();
      userDropdown.classList.toggle("hidden");
    });

    userDropdown.addEventListener("click", function(e) {
      e.stopPropagation();
    });

    document.addEventListener("click", function() {
      userDropdown.classList.add("hidden");
    });
  }
</script>
<script>
  const menuBtn = document.getElementById('menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');

  if (menuBtn && mobileMenu) {
    menuBtn.addEventListener('click', function(e) {
      e.stopPropagation();
      mobileMenu.classList.toggle('hidden');
    });

    // Optional: Hide menu when clicking outside
    document.addEventListener('click', function(e) {
      if (!mobileMenu.contains(e.target) && !menuBtn.contains(e.target)) {
        mobileMenu.classList.add('hidden');
      }
    });
  }
</script>

     <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>
     <script src="https://kit.fontawesome.com/f8395e0dfb.js" crossorigin="anonymous"></script>
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
     <script data-th-replace="${script}"></script>
     <script th:src="@{'/js/mode.js'}"></script>
</body>
</html>